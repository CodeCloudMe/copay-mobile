<ion-view title="{{wallet.name|capitalize}} Wallet">
  <ion-nav-buttons side="left">
    <button menu-toggle="left"class="button button-icon icon ion-navicon"></button>
  </ion-nav-buttons>

  <ion-content class="has-header">

    <div class="card">
      <div class="item item-divider">
        {{wallet.isShared() ? 'New proposal' : 'Send'}}
      </div>

      <form ng-submit="newProposal()" novalidate>
          <label class="item item-input">
            <input
              type="text" ng-model="form.address"
              placeholder="Bitcoin address" required>
          </label>
          <button class="button aside" ng-click="toggleUnit()">{{unitCode}}</button>
          <label class="item item-input">
            <input
              type="number" ng-model="form.amount"
              placeholder="Amount in {{unitCode}}" ng-change="convert()"
              min="0.00000001" max="10000000000" required>
          </label>
          <label class="item item-input">
            <input
              type="text" value="{{altAmount}}"
              placeholder="Amount in {{altCode}}"
              disabled="disabled" convert-rate>
          </label>
          <label class="item item-input">
            <input type="text" ng-model="form.reference" placeholder="Reference">
          </label>
          <label class="item">
            <button class="button button-block button-positive" type="submit">
              {{wallet.isShared() ? 'Create proposal' : 'Send'}}
            </button>
        </div>
      </form>
    </div>

    <div class="card" ng-show="wallet.isShared() && proposals">
      <div class="item item-divider">
        Spending proposals
      </div>
      <div class="item item-text-wrap" ng-repeat="proposal in proposals" ui-sref="profile.wallet.proposal({proposalId:proposal.id})">
        {{proposal.receiver}} - {{proposal.reference}}
        <span class="badge">{{proposal.fiat}} {{proposal.fiatCode}}</span>
      </div>
    </div> 
    

  </ion-content>
</ion-view>
